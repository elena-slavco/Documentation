<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Yasgui API Reference - Triply Documentation</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="generator" content="mkdocs-1.4.3, mkdocs-gitbook-1.0.7">

<link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon">
<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta rel="next" href="" />
<link href="../css/style.min.css" rel="stylesheet"> 
</head>

<body>
<div class="book">
<div class="book-summary">
<div id="book-search-input" role="search">
<input type="text" placeholder="Type to search" />
</div> <!-- end of book-search-input -->

<nav role="navigation">
<ul class="summary">
<li>
<a href=".." target="_blank" class="custom-link">Triply Documentation</a>
</li>
<li class="divider"></li>
<li class="chapter" data-path="">
<a href="..">Home</a>
<li class="header">TriplyDB</li>

<li>
<a href="../triply-db-getting-started" class="">Getting started</a>
</li>

<li class="header">TriplyETL</li>

<li>
<a href="#">General</a>
<ul>

<li>
<a href="../triply-etl" class="">Overview</a>
</li>

<li>
<a href="../triply-etl/getting-started" class="">Getting started</a>
</li>

<li>
<a href="../triply-etl/cli" class="">Command Line Interface (CLI)</a>
</li>

<li>
<a href="../triply-etl/changelog" class="">Changelog</a>
</li>

<li>
<a href="../triply-etl/maintenance" class="">Maintenance</a>
</li>
</ul>
</li>

<li>
<a href="#">TriplyETL Approach</a>
<ul>

<li>
<a href="../triply-etl/extract" class="">Extract</a>
</li>
</ul>
</li>

<li class="header">Yasgui</li>

<li>
<a href="../yasgui" class="">Introduction</a>
</li>

<li class="divider"></li>



<li><a href="http://www.mkdocs.org">
Published with MkDocs
</a></li>

<li><a href="https://github.com/GitbookIO/theme-default">
Theme by GitBook
</a></li>
</ul>

</nav>

</div> <!-- end of book-summary -->

<div class="book-body">
<div class="body-inner">
<div class="book-header" role="navigation">

<!-- Title -->
<h1>
<i class="fa fa-circle-o-notch fa-spin"></i>
<a href="." ></a>
</h1>

</div> <!-- end of book-header -->

<div class="page-wrapper" tabindex="-1" role="main">
<div class="page-inner">
<div id="book-search-results">
<div class="search-noresults">

<section class="normal markdown-section">



<p>Yasgui consists of three components: Yasqe (a SPARQL Query Editor), Yasr (a SPARQL result visualizer), and Yasgui which binds the former together.
Here you can find documentation on ways to include, configure and extend these components as suitable to your use-case.</p>
<p><img alt="Overview of Yasgui Components" src="yasgui.png" />.</p>
<h2 id="about-additional-plugins-triplydbplugins">About additional plugins {#triplyDbPlugins}</h2>
<p>Yasgui, Yasqe and Yasr are all <a href="https://github.com/TriplyDB/Yasgui">open source</a> and MIT licensed.
Triply provides additional plugins that are only free to use via <a href="https://yasgui.triply.cc">https://yasgui.triply.cc</a> or <a href="https://triplydb.com/">TriplyDB</a>. These additional plugins are not MIT licensed and cannot be used or included programmatically.</p>
<h2 id="installation">Installation</h2>
<h3 id="via-package-managers">Via package managers</h3>
<p>To include Yasgui in a project include the package run the commands below.</p>
<h4 id="npm">npm</h4>
<pre><code class="language-sh">npm i @triply/yasgui
</code></pre>
<h4 id="yarn">yarn</h4>
<pre><code class="language-sh">yarn add @triply/yasgui
</code></pre>
<h3 id="via-cdn-web">Via cdn {#web}</h3>
<p>To include Yasgui in your webpage, all that's needed is importing the Yasgui JavaScript and CSS files, and initializing a Yasgui object:</p>
<pre><code class="language-html">&lt;head&gt;
  &lt;link href=&quot;https://unpkg.com/@triply/yasgui/build/yasgui.min.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
  &lt;script src=&quot;https://unpkg.com/@triply/yasgui/build/yasgui.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;yasgui&quot;&gt;&lt;/div&gt;
  &lt;script&gt;
    const yasgui = new Yasgui(document.getElementById(&quot;yasgui&quot;));
  &lt;/script&gt;
&lt;/body&gt;
</code></pre>
<p>If you only want to use Yasgui for querying a specific endpoint, you can add the following styling to disable the endpoint selector:</p>
<pre><code class="language-html">&lt;style&gt;
  .yasgui .autocompleteWrapper {
    display: none !important;
  }
&lt;/style&gt;
</code></pre>
<p>And pass a second argument to the Yasgui initializer to specify the default endpoint:</p>
<pre><code class="language-js">const yasgui = new Yasgui(document.getElementById(&quot;yasgui&quot;), {
  requestConfig: { endpoint: &quot;http://example.com/sparql&quot; },
  copyEndpointOnNewTab: false,
});
</code></pre>
<p>Note: If you've already opened the Yasgui page before, you must first clear your local-storage cache before you will see the changes taking effect.</p>
<h2 id="api-reference">API Reference</h2>
<h3 id="yasgui-api">Yasgui API</h3>
<p>Yasgui features tabs. Each tab has its own isolated query and results.
These are persistent as the user switches between tabs.</p>
<pre><code class="language-js">// Add a new Tab. Returns the new Tab object.
yasgui.addTab(
  true, // set as active tab
  { ...Yasgui.Tab.getDefaults(), name: &quot;my new tab&quot; }
);

// Get a Tab. Returns the current Tab if no tab id is given.
yasgui.getTab(&quot;tab_id_x&quot;);
</code></pre>
<h3 id="tab-api">Tab API</h3>
<pre><code class="language-js">// set the query of the tab
tab.setQuery(&quot;select * where {...}&quot;);

// close the tab
tab.close();

// access the Yasqe API for the tab
tab.yasqe;

// access the Yasr API for the tab
tab.yasr;
</code></pre>
<h3 id="events-yasgui-events">Events {#yasgui-events}</h3>
<p>Yasgui emits several Events. For information on how to use Events, see <a href="https://nodejs.org/api/events.html">NodeJS's Event documentation</a>.</p>
<pre><code class="language-ts">// Fires when a query is executed
yasgui.on(&quot;query&quot;, (instance: Yasgui, tab: Tab) =&gt; {});
// Fires when a query is finished
yasgui.on(&quot;queryResponse&quot;, (instance: Yasgui, tab: tab) =&gt; {});
</code></pre>
<h3 id="configuration-yasgui-config">Configuration {#yasgui-config}</h3>
<p>This configuration object is accessible/changeable via <code>Yasgui.defaults</code> or <code>yasgui.config</code>. You can pass these along when initializing Yasgui as well. To change settings to the Yasqe and Yasr components used by Yasgui, you are best off changing the <code>Yasgui.Yasqe.defaults</code> and <code>Yasgui.Yasr.defaults</code> objects before initializing Yasgui.</p>
<pre><code class="language-js">{
  /**
   * Change the default request configuration, such as the headers
   * and default yasgui endpoint.
   * Define these fields as plain values, or as a getter function
   */
  requestConfig: {
    endpoint: 'https://example.org/sparql',
    //Example of using a getter function to define the headers field:
    headers: () =&gt; ({
      'key': 'value'
    }),
    method: 'POST',


  },
  // Allow resizing of the Yasqe editor
  resizeable: true,

  // Whether to autofocus on Yasqe on page load
  autofocus: true,

  // Use the default endpoint when a new tab is opened
  copyEndpointOnNewTab: false,

  // Configuring which endpoints appear in the endpoint catalogue list
  endpointCatalogueOptions {
    getData: () =&gt; {
      return [
        //List of objects should contain the endpoint field
        //Feel free to include any other fields (e.g. a description or icon
        //that you'd like to use when rendering)
        {
          endpoint: &quot;https://dbpedia.org/sparql&quot;
        },
        {
          endpoint: &quot;https://query.wikidata.org&quot;
        }
        // ...
      ];
    },
    //Data object keys that are used for filtering. The 'endpoint' key already used by default
    keys: [],
    //Data argument contains a `value` property for the matched data object
    //Source argument is the suggestion DOM element to append your rendered item to
    renderItem: (data, source) =&gt; {
        const contentDiv = document.createElement(&quot;div&quot;);
        contentDiv.innerText = data.value.endpoint;
        source.appendChild(contentDiv);
      }
  }
}
</code></pre>
<h2 id="yasqe">Yasqe</h2>
<p>Yasqe extends the CodeMirror Library. For an overview of CodeMirror functionality, see the <a href="https://codemirror.net/doc/manual.html">CodeMirror documentation</a>. Note: Where CodeMirror provides <code>CodeMirror</code> in the global namespace, we provide <code>Yasqe</code>.</p>
<h3 id="yasqe-api">Yasqe API</h3>
<p>The Yasqe API can be accessed via <code>yasqe</code> (if Yasqe is run standalone) or via a tab <code>yasgui.getTab().yasqe</code> when run in Yasgui</p>
<pre><code class="language-js">// Set query value in editor
yasqe.setValue(&quot;select * where {...}&quot;);

// Get query value from editor
yasqe.getValue();

// execute a query
yasqe.query({
  url: &quot;https://dbpedia.org/sparql&quot;,
  reqMethod: &quot;POST&quot;, // or &quot;GET&quot;
  headers: { Accept: &quot;...&quot; /*...*/ },
  args: { arg1: &quot;val1&quot; /*...*/ },
  withCredentials: false,
});

// get whether we're in query or update mode
yasqe.getQueryMode();

// get the query type (select, ask, construct, ...)
yasqe.getQueryType();

// get prefixes map from the query string
yasqe.getPrefixesFromQuery();

// Add prefixes to the query.
yasqe.addPrefixes({ dbo: &quot;http://dbpedia.org/ontology/&quot; });

// Remove prefixes to the query.
yasqe.removePrefixes({ dbo: &quot;http://dbpedia.org/ontology/&quot; });

// set size of input area
yasqe.setSize(500, 300);

// Collapsing prefixes if there are any. Use false to expand them.
yasqe.collapsePrefixes(true);
</code></pre>
<h3 id="events-yasqe-events">Events {#yasqe-events}</h3>
<p>Yasqe emits several Events. For information on how to use Events, see <a href="https://nodejs.org/api/events.html">NodeJS's Event documentation</a>.</p>
<pre><code class="language-ts">// Fires when a query is executed
yasqe.on(&quot;query&quot;, (instance: Yasqe, req: superagent.SuperAgentRequest) =&gt; {});
// Fires when a query is finished
yasqe.on(&quot;queryResponse&quot;, (instance: Yasqe, req: superagent.SuperAgentRequest, duration: number) =&gt; {});
</code></pre>
<h3 id="configuration-yasqe-config">Configuration {#yasqe-config}</h3>
<p>The configuration options, for Yasqe can be accessed through <code>Yasgui.Yasqe</code> or <code>yasqe.options</code>.</p>
<p>Here are some configurable fields for Yasqe. They can be accessed and set through <code>Yasqe.defaults</code> and <code>yasqe.options</code>. The configuration object extends the <a href="https://codemirror.net/doc/manual.html#config">CodeMirror config</a>, meaning fields like for example <code>tabSize</code> may also be set.</p>
<pre><code class="language-ts">// number of seconds to persist query input, stored in the browser
// set to 0 to always load the default query on page load
persistencyExpire // default: 30 days

// default settings for how to query the endpoint
requestOpts: {
  endpoint: &quot;http://dbpedia.org/sparql&quot;,
  method: &quot;POST&quot;,
  headers: {}
},
</code></pre>
<h2 id="yasr">Yasr</h2>
<p>Yasr is an extendable library that renders SPARQL results. Yasr is responsible for gluing the different visualization plugins together, and providing utilities such as SPARQL result parsers.</p>
<h3 id="yasr-api">Yasr API</h3>
<pre><code class="language-ts">// Set and draw a SPARQL response. The parameter is either
// - a plain response string
// - a SuperAgent response
// - or an object with the specified keys
yasr.setResponse({
  data: &quot;...&quot;;
  contentType: &quot;application/sparql-results+json&quot;;
  status: 200;
  executionTime: 1000; // ms
  // error to show
})

// Draw results with current plugin
yasr.draw()

// Check whether a result has been drawn
yasr.somethingDrawn()

// Select a plugin
yasr.selectPlugin(&quot;table&quot;)

// Download a result set (if possible)
yasr.download()
</code></pre>
<h3 id="events-yasr-events">Events {#yasr-events}</h3>
<pre><code class="language-ts">// Fires just before a plugins draws the results
yasr.on(&quot;draw&quot;,(instance: Yasr, plugin: Plugin) =&gt; void);

// Fires when a plugin finished drawing the results
yasr.on(&quot;drawn&quot;,(instance: Yasr, plugin: Plugin) =&gt; void);
</code></pre>
<h3 id="configuration-yasr-configuration">Configuration {#yasr-configuration}</h3>
<p>This configuration object is accessible/changeable via <code>Yasr.defaults</code> and <code>yasr.options</code>, and you can pass these along when initializing Yasr as well. Output visualizations are defined separately.</p>
<pre><code class="language-ts">// Ordered list of enabled output plugins
pluginOrder = [&quot;table&quot;, &quot;response&quot;]

// The default plugin
defaultPlugin = &quot;table&quot;

// seconds before results expire in the browser
// Set to 0 to disable results persistency
persistencyExpire // default: 30 days

// Map of prefixes to use in results views
prefixes: {&quot;dbo&quot;:&quot;http://dbpedia.org/ontology/&quot;,/*...*/}
</code></pre>
<h3 id="yasr-plugins">Yasr plugins</h3>
<p>Each plugin has its own configuration options.
These options can be accessed through <code>Yasr.plugins</code>.</p>
<h4 id="table">Table</h4>
<p>This plugin shows SPARQL results as a table, using the <a href="https://datatables.net/">DataTables.net</a> plugin. This plugin is defined in <code>Yasr.plugins.table</code> and can be configured using <code>Yasr.plugins.table.defaults</code>.</p>
<pre><code class="language-ts">// Open URIs in results in a new window rather than the current.
openIriInNewWindow = true;
</code></pre>
<h4 id="raw-response">Raw Response</h4>
<p>A plugin which uses <a href="https://codemirror.net/">CodeMirror</a> to present the SPARQL results as-is. This plugin is defined at <code>Yasr.plugins.response</code> and can be configured using <code>Yasr.plugins.response.defaults</code>.</p>
<pre><code class="language-ts">// Number of lines to show before hiding rest of response
// (too large value may cause browser performance issues)
maxLines = 30;
</code></pre>
<h3 id="writing-a-yasr-plugin">Writing a Yasr plugin</h3>
<p>To register a Yasr plugin, add it to Yasr by running <code>Yasr.registerPlugin(pluginName: string, plugin: Plugin)</code>. Below is an example implementation for rendering the result of an ASK query, which returns either <code>true</code> or <code>false</code>. See also the implementations of the <a href="https://github.com/TriplyDB/YASGUI.YASR/blob/gh-pages/src/table.js">Table</a> and <a href="https://github.com/TriplyDB/YASGUI.YASR/blob/gh-pages/src/rawResponse.js">Raw Response</a> plugins.</p>
<pre><code class="language-ts">class Boolean {
  // A priority value. If multiple plugin support rendering of a result, this value is used
  // to select the correct plugin
  priority = 10;

  // Whether to show a select-button for this plugin
  hideFromSelection = true;

  constructor(yasr) {
    this.yasr = yasr;
  }

  // Draw the result set. This plugin simply draws the string 'True' or 'False'
  draw() {
    const el = document.createElement(&quot;div&quot;);
    el.textContent = this.yasr.results.getBoolean() ? &quot;True&quot; : &quot;False&quot;;
    this.yasr.resultsEl.appendChild(el);
  }

  // A required function, used to indicate whether this plugin can draw the current
  // resultset from yasr
  canHandleResults() {
    return (
      this.yasr.results.getBoolean &amp;&amp;
      (this.yasr.results.getBoolean() === true || this.yasr.results.getBoolean() == false)
    );
  }
  // A required function, used to identify the plugin, works best with an svg
  getIcon() {
    const textIcon = document.createElement(&quot;p&quot;);
    textIcon.innerText = &quot;✓/✗&quot;;
    return textIcon;
  }
}

//Register the plugin to Yasr
Yasr.registerPlugin(&quot;MyBooleanPlugin&quot;, Boolean);
</code></pre>
<h2 id="faq">FAQ</h2>
<h3 id="using-yasgui-in-react">Using Yasgui in react</h3>
<p>To include Yasgui in React, use the following snippet. This snippet assumes a React repository configured via <a href="https://github.com/facebook/create-react-app">create-react-app</a>, and a minimum React version of 16.8.</p>
<pre><code class="language-ts">import Yasgui from &quot;@triply/yasgui&quot;;
import &quot;@triply/yasgui/build/yasgui.min.css&quot;;
export default function App() {
  useEffect(() =&gt; {
    const yasgui = new Yasgui(document.getElementById(&quot;yasgui&quot;));
    return () =&gt; {};
  }, []);

  return &lt;div id=&quot;yasgui&quot; /&gt;;
}
</code></pre>


</section>
</div> <!-- end of search-noresults -->
<div class="search-results">
<div class="has-results">

<h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
<ul class="search-results-list"></ul>

</div> <!-- end of has-results -->
<div class="no-results">

<h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>

</div> <!-- end of no-results -->
</div> <!-- end of search-results -->
</div> <!-- end of book-search-results -->

</div> <!-- end of page-inner -->
</div> <!-- end of page-wrapper -->

</div> <!-- end of body-inner -->

</div> <!-- end of book-body -->
<script src="../js/main.js"></script>
<script src="../search/main.js"></script>
<script src="../js/gitbook.min.js"></script>
<script src="../js/theme.min.js"></script>
</body>
</html>